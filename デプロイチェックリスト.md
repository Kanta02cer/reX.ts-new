# reX.ts デプロイチェックリスト

## 前提条件
- [ ] GitHubアカウントを用意
- [ ] DockerHubアカウントを用意
- [ ] 本番環境サーバーを準備（Ubuntu 20.04 LTS以上）
- [ ] ドメイン名を取得（rexapp.example.comとapi.rexapp.example.com用）

## 1. GitHub設定
- [ ] プロジェクトリポジトリをGitHubにプッシュ
- [ ] GitHubシークレットの設定
  - [ ] `DOCKER_HUB_USERNAME`
  - [ ] `DOCKER_HUB_TOKEN`
  - [ ] `PRODUCTION_HOST`
  - [ ] `PRODUCTION_USERNAME`
  - [ ] `PRODUCTION_SSH_KEY`
  - [ ] `GOOGLE_API_KEY`
  - [ ] `SLACK_WEBHOOK`

## 2. サーバーセットアップ
- [ ] サーバーへのSSHアクセス確認
- [ ] セットアップスクリプトをサーバーに転送
- [ ] セットアップスクリプトを実行
- [ ] 環境変数の設定（.env）
  - [ ] `DOCKER_USERNAME`
  - [ ] `GOOGLE_API_KEY`

## 3. DNS・SSL設定
- [ ] DNSレコードの設定
  - [ ] rexapp.example.com → サーバーIP
  - [ ] api.rexapp.example.com → サーバーIP
- [ ] Let's Encryptによる証明書発行
  - [ ] certbotのインストール
  - [ ] 証明書の発行
  - [ ] 証明書の自動更新設定

## 4. アプリケーションデプロイ
- [ ] GitHub Actionsによるデプロイ実行
  - [ ] ワークフロー完了の確認
  - [ ] エラーがある場合は修正
- [ ] または手動デプロイを実行
  - [ ] DockerHubからイメージ取得
  - [ ] コンテナ起動

## 5. デプロイ確認
- [ ] フロントエンドアクセス（https://rexapp.example.com）
  - [ ] ページが正常に表示される
  - [ ] ログイン機能が動作する
- [ ] バックエンドアクセス（https://api.rexapp.example.com/health）
  - [ ] ヘルスチェックが成功する
  - [ ] APIエンドポイントが正常に動作する

## 6. モニタリング設定
- [ ] モニタリングファイルの転送
  - [ ] `monitoring-docker-compose.yml`
  - [ ] `prometheus.yml`
  - [ ] `blackbox.yml`
  - [ ] `alertmanager.yml`
- [ ] AlertManagerのSlack設定
- [ ] モニタリングスタックの起動
- [ ] Grafanaの設定
  - [ ] ログイン
  - [ ] パスワード変更
  - [ ] データソース追加（Prometheus）
  - [ ] ダッシュボードインポート
    - [ ] Node Exporter Full (ID: 1860)
    - [ ] Docker and system monitoring (ID: 893)
    - [ ] Blackbox Exporter (ID: 7587)

## 7. 最終確認
- [ ] コンテナのヘルスステータス確認
- [ ] ログに異常がないことを確認
- [ ] モニタリングが正常に動作していることを確認
- [ ] SSL証明書が正常に機能していることを確認（https接続）
- [ ] システム全体の動作確認
  - [ ] キャリア分析機能
  - [ ] スカウトメッセージ生成機能
  - [ ] チャット機能

## 8. バックアップ・保守体制
- [ ] バックアップの設定
- [ ] ログローテーションの設定
- [ ] 障害連絡体制の整備
- [ ] 定期メンテナンスの日程設定 